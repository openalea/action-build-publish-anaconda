name: Generate Docs PR

on:
  workflow_dispatch:

permissions:
  contents: write
  pull-requests: write

jobs:
  generate-docs:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Setup Python
        uses: actions/setup-python@v5
      - name: github-actions-docs
        uses: tjtharrison/github-actions-docs@1.2.0
        with:
          OUTPUT_FILE_NAME: './doc/actions/setup-ci/README.md'
          ACTION_FILE_NAME: './setup-ci/action.yml'
      - name: Show git status
        run: |
          cat './doc/actions/setup-ci/README.md'
          git status
          git diff
      - name: Create Pull Request
        uses: peter-evans/create-pull-request@v7
        with:
          commit-message: 'update generated docs'
          branch: docs/update-generated-docs
          title: 'Update generated docs'
          body: 'This PR contains updated documentation generated from the latest action and workflow YAML.'